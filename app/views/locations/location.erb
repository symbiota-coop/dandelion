<h1 class="mb-3">
  <%= @location.name %>
  <br />
  <small class="text-muted" style="font-size: 70%;">
    Check out <%= pluralize(@events.count, 'upcoming event') %> near <%= @location.query %> on Dandelion
  </small>
</h1>

<% fragment = Fragment.find_by(key: "/locations/#{@location.name}") %>
<div <% unless fragment %>data-with-placeholder<% end %> class="readable" data-pagelet-url="/locations/<%=@location.name%>">
  <% if fragment %>
    <%== fragment.value %>
  <% else %>
    <%= partial :placeholder, locals: { count: 1 } %>
  <% end %>
</div>

<%= partial :'events/search_form', locals: { path: '/events' } %>

<div data-with-placeholder data-pagelet-url="/events?near=<%=CGI.escape(@location.query)%>">
  <%= partial :'events/blocks_placeholder' %>
</div>