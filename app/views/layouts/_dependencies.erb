<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="preconnect" href="https://rawcdn.githack.com">
<link rel="preconnect" href="https://js.stripe.com">
<link rel="preconnect" href="https://maps.googleapis.com">
<link rel="preconnect" href="https://cdn.iframe.ly">
<link rel="preconnect" href="https://challenges.cloudflare.com">

<link href="/infinite_admin/plugins/icon/themify-icons/themify-icons.css" rel="stylesheet">
<link href="/infinite_admin/plugins/bootstrap/bootstrap4/css/bootstrap.css" rel="stylesheet">
<link href="/infinite_admin/plugins/animate/animate.min.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<% FRONTEND_DEPENDENCIES.each do |base_url, libs| %>
  <% libs.each do |path, files| %>
    <% files.split(' ').each do |f| %>
      <% url = path.nil? ? "#{base_url}#{f}" : "#{base_url}#{path}/#{f}" %>
      <% ext = f.split('.').last.to_sym %>
      <% url += "?#{@cachebuster}" if base_url == '/javascripts/' %>
      <% case ext %>
      <% when :js %>
        <script src="<%= url %>" defer></script>
      <% when :css %>
        <link rel="stylesheet" href="<%= url %>">
      <% end %>
    <% end %>
  <% end %>
<% end %>

<link rel="stylesheet" href="/stylesheets/app.css?<%= @cachebuster %>">

<% [
     '//challenges.cloudflare.com/turnstile/v0/api.js?compat=recaptcha',
     '//js.stripe.com/v3/',
     "//cdn.iframe.ly/embed.js?key=#{ENV['IFRAMELY_KEY']}",
     "//maps.googleapis.com/maps/api/js?key=#{ENV['GOOGLE_MAPS_PUBLIC_API_KEY']}&libraries=places"
   ].each do |f| %>
  <script src="<%= f %>" defer></script>
<% end %>

<% unless ENV['CREATE_VIDEO'] %>
  <script>
    window.paceOptions = { ajax: { trackWebSockets: false } };
  </script>
  <script src="/infinite_admin/plugins/loader/pace/pace.min.js" defer></script>
<% end %>
<script src="/infinite_admin/plugins/cookie/js/js.cookie.js" defer></script>
<script src="/infinite_admin/plugins/tooltip/popper/popper.min.js" defer></script>
<script src="/infinite_admin/plugins/bootstrap/bootstrap4/js/bootstrap.js" defer></script>
<script src="/infinite_admin/plugins/scrollbar/slimscroll/jquery.slimscroll.min.js" defer></script>
<script src="/infinite_admin/js/apps.js?<%= @cachebuster %>" defer></script>

<script>
  $(function () { App.init(); });
</script>
